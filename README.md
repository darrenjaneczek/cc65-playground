# cc65-playground
A playground for the cc65 compiler/assembler.

I am experimenting with a system for building executables
on the VIC-20 and Commodore 64 (and maybe others?). 
It relies on cc65.


## BYO-cc65 compiler

If you can compile your own cc65 compiler, and ensure that its
include `.h` directory is referenced via variable `CC65_INC`,
running `make` in the `/src` folder should be fine.


## nix approach

If you install nix, you can take advantage of the `shell.nix` file
to ensure you have the cc65 compiler installed.

In the root directory, run `nix-shell` to open an environment with cc65
on the path, as well as including the `.h` includes directory defined as the
`CC65_INC` variable.

Running `make` in the `/src` folder should be fine.

## Docker approach

*WARNING*: This doesn't appear to work reliably in a Mac environment.

### Requirements
- Docker
- docker-compose

### Initialize environment

Docker is used to create a `builder` service as well as a web-based emulator.

In the root directory:

```bash
docker-compose up
```

#### Development environment

The `src` directory contains a `Makefile` and several `.c` files.
If any of these are changed, while the docker environment is running,
the `Makefile` will be executed by the `builder` service.

This is kind of sloppy, as any change will result in a rebuild of 
everything listed within `Makefile`. Adding entries to `Makefile`
for new executables, and commenting out undesired executables is
the current recommended approach.

Any built executables will appear in the
`/output` folder. A sideeffect of these
being generated by docker processes is
that the owner/group is `root`.

#### Web-based emulator

A web shell has been built to run a
web-based emulator, and show a list of compiled
VIC-20 programs.

To access it, while the `docker-compose` is up,
go to URL: http://localhost:8088

The emulator used is https://github.com/nippur72/vic20-emu

